<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shoes</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      .card {
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgb(255, 255, 255);
        transition: transform 0.3s ease;
        max-width: 300px;
        width: 100%;
      }
      .card-body {
        padding: 15px;
      }
      .card-img-top {
        height: 170px;
        object-fit: cover;
      }

      .card:hover {
        transform: translateY(-5px);
      }

      .card-title {
        font-size: 1.1rem;
        font-weight: 500;
        margin-bottom: 10px;
      }

      .card-text {
        font-size: 0.9rem;
        color: #666;
      }

      .btn-add-to-cart {
        width: 100%;
        background-color: #fe3448;
        color: #fff;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        transition: background-color 0.3s ease;
      }

      .btn-add-to-cart:hover {
        background-color: #e62e40;
      }
      .btn-added {
        background-color: #28a745 !important;
        cursor: not-allowed;
      }
      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .modal-content {
        background-color: #fff;
        border-radius: 8px;
        width: 90%;
        max-width: 600px;
        padding: 2rem;
        position: relative;
        overflow-y: auto;
        max-height: 90vh;
      }
      .modal-content img {
        width: 100%;
        height: 400px;
        object-fit: contain;
        border-radius: 8px;
      }
      .modal-content h2 {
        font-size: 2rem;
        margin: 1.5rem 0 1rem;
        color: #2c3e50;
      }
      .modal-content p {
        font-size: 1rem;
        color: #666;
      }
      .close-modal {
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 1.5rem;
        color: #333;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <nav>
      <div id="navbar"></div>
    </nav>
    <h3 style="margin-top: 20px; margin-left: 40px; font-weight: bold">
      Womens Shoes
    </h3>
    <div class="container mt-4">
      <div class="row">
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="1">
            <img
              src="sandals unisex.webp"
              class="card-img-top"
              alt="Product 1"
            />
            <div class="card-body">
              <h5 class="card-title">sandals unisex</h5>
              <p class="card-text">$19.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="2">
            <img
              src="shoes/fish mouth heels.webp"
              class="card-img-top"
              alt="Product 2"
            />
            <div class="card-body">
              <h5 class="card-title">fish mouth heels</h5>
              <p class="card-text">$29.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="3">
            <img
              src="shoes/high heeels.webp"
              class="card-img-top"
              alt="Product 3"
            />
            <div class="card-body">
              <h5 class="card-title">high heels</h5>
              <p class="card-text">$39.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="4">
            <img
              src="shoes/jasmine heels.webp"
              class="card-img-top"
              alt="Product 4"
            />
            <div class="card-body">
              <h5 class="card-title">Jasmine heels</h5>
              <p class="card-text">$49.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="5">
            <img
              src="shoes/korean sandals.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">korean sandals</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="6">
            <img
              src="shoes/outdoor slippers.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">outdoor slippers</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container mt-4">
      <div class="row">
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="7">
            <img
              src="shoes/leather heels.webp"
              class="card-img-top"
              alt="Product 1"
            />
            <div class="card-body">
              <h5 class="card-title">leather heels</h5>
              <p class="card-text">$19.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="8">
            <img
              src="shoes/women sports shoes.webp"
              class="card-img-top"
              alt="Product 2"
            />
            <div class="card-body">
              <h5 class="card-title">sports shoes</h5>
              <p class="card-text">$29.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="9">
            <img
              src="shoes/women indoor slippers.webp"
              class="card-img-top"
              alt="Product 3"
            />
            <div class="card-body">
              <h5 class="card-title">Indoor slippers</h5>
              <p class="card-text">$39.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="10">
            <img
              src="shoes/wedge heels.webp"
              class="card-img-top"
              alt="Product 4"
            />
            <div class="card-body">
              <h5 class="card-title">heeels</h5>
              <p class="card-text">$49.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="11">
            <img
              src="shoes/szchen red slippers.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">Product 5</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="12">
            <img
              src="shoes/ules slippers.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">mule slippers</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <h3 style="margin-top: 20px; margin-left: 40px; font-weight: bold">
      Mens shoes
    </h3>
    <div class="container mt-4">
      <div class="row">
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="13">
            <img
              src="shoes/ens sandals.webp"
              class="card-img-top"
              alt="Product 1"
            />
            <div class="card-body">
              <h5 class="card-title">Mens sandals</h5>
              <p class="card-text">$19.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="14">
            <img
              src="shoes/ns military shoes.webp"
              class="card-img-top"
              alt="Product 2"
            />
            <div class="card-body">
              <h5 class="card-title">Mmilitary shoes</h5>
              <p class="card-text">$29.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="15">
            <img
              src="shoes/mens airmax.webp"
              class="card-img-top"
              alt="Product 3"
            />
            <div class="card-body">
              <h5 class="card-title">Airmax</h5>
              <p class="card-text">$39.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="16">
            <img
              src="shoes/mens sxchen slippers.webp"
              class="card-img-top"
              alt="Product 4"
            />
            <div class="card-body">
              <h5 class="card-title">slippers</h5>
              <p class="card-text">$49.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="17">
            <img
              src="shoes/mens athletic.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">athletic shoes</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="18">
            <img
              src="shoes/mens boots.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">Mens boots</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container mt-4">
      <div class="row">
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="19">
            <img
              src="shoes/mens brave.webp"
              class="card-img-top"
              alt="Product 1"
            />
            <div class="card-body">
              <h5 class="card-title">Brave shoes</h5>
              <p class="card-text">$19.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="20">
            <img
              src="shoes/mens casual puma.webp"
              class="card-img-top"
              alt="Product 2"
            />
            <div class="card-body">
              <h5 class="card-title">Puma shoes</h5>
              <p class="card-text">$29.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="21">
            <img
              src="shoes/mens casual shoes.webp"
              class="card-img-top"
              alt="Product 3"
            />
            <div class="card-body">
              <h5 class="card-title">Mens casuals</h5>
              <p class="card-text">$39.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="22">
            <img
              src="shoes/mens casual.webp"
              class="card-img-top"
              alt="Product 4"
            />
            <div class="card-body">
              <h5 class="card-title">Mens casuals</h5>
              <p class="card-text">$49.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="23">
            <img
              src="shoes/ns military shoes.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">Military shoes</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
          <div class="card" data-id="24">
            <img
              src="shoes/mens idoor slippers.webp"
              class="card-img-top"
              alt="Product 5"
            />
            <div class="card-body">
              <h5 class="card-title">Mens slippers</h5>
              <p class="card-text">$59.99</p>
              <button class="btn btn-add-to-cart" onclick="addToCart(this)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Single Modal for All Products -->
    <div class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <img src="" alt="Product Image" />
        <h2>Product Title</h2>
        <p>Price: <span id="modal-price"></span></p>
        <p>Description: <span id="modal-description"></span></p>
        <button class="btn btn-add-to-cart" onclick="addToCartFromModal(this)">
          Add to Cart
        </button>
      </div>
    </div>
    <div id="footer"></div>
    <script>
      const products = [
        {
          id: 1,
          title: "Sandals Unisex",
          image: "sandals unisex.webp",
          price: 19.99,
          description:
            "These unisex sandals are designed for ultimate comfort and durability, making them perfect for casual outings, beach trips, or everyday wear. Featuring a lightweight design and adjustable straps, they provide a secure fit for all-day comfort. The durable sole ensures long-lasting use, even on rough surfaces.",
          quantity: 1,
        },
        {
          id: 2,
          title: "Fish Mouth Heels",
          image: "shoes/fish mouth heels.webp",
          price: 29.99,
          description:
            "Elevate your style with these elegant fish mouth heels. Designed for a sophisticated look, these heels feature a unique fish mouth design that adds a touch of glamour to any outfit. The cushioned insole ensures comfort, while the sturdy heel provides stability for all-day wear. Perfect for formal events or evening occasions.",
          quantity: 1,
        },
        {
          id: 3,
          title: "High Heels",
          image: "shoes/high heeels.webp",
          price: 39.99,
          description:
            "Step out in style with these classic high heels. Designed to add height and elegance, these heels are perfect for both formal and casual occasions. The sleek design and comfortable fit make them a must-have in your shoe collection. The durable construction ensures they can withstand regular use.",
          quantity: 1,
        },
        {
          id: 4,
          title: "Jasmine Heels",
          image: "shoes/jasmine heels.webp",
          price: 49.99,
          description:
            "Add a touch of sophistication to your wardrobe with these Jasmine heels. Featuring a chic design and comfortable fit, these heels are perfect for formal events, parties, or evening wear. The cushioned insole and sturdy heel ensure all-day comfort, while the elegant design makes them a standout piece.",
          quantity: 1,
        },
        {
          id: 5,
          title: "Korean Sandals",
          image: "shoes/korean sandals.webp",
          price: 59.99,
          description:
            "Stay trendy and comfortable with these Korean-style sandals. Combining fashion and functionality, these sandals feature a unique design inspired by Korean fashion trends. The lightweight construction and adjustable straps ensure a perfect fit, while the durable sole provides long-lasting wear. Ideal for casual outings or summer trips.",
          quantity: 1,
        },
        {
          id: 6,
          title: "Outdoor Slippers",
          image: "shoes/outdoor slippers.webp",
          price: 59.99,
          description:
            "These outdoor slippers are designed for comfort and durability, making them perfect for outdoor activities. Featuring a rugged sole and breathable material, they provide excellent support and comfort for long walks or casual outings. The easy-to-clean design ensures they stay fresh and ready for use.",
          quantity: 1,
        },
        {
          id: 7,
          title: "Leather Heels",
          image: "shoes/leather heels.webp",
          price: 19.99,
          description:
            "These stylish leather heels are a versatile addition to your shoe collection. Made from high-quality leather, they offer a sleek and polished look for both casual and formal occasions. The cushioned insole and sturdy heel ensure all-day comfort, while the durable construction guarantees long-lasting use.",
          quantity: 1,
        },
        {
          id: 8,
          title: "Sports Shoes",
          image: "shoes/women sports shoes.webp",
          price: 29.99,
          description:
            "Stay active and comfortable with these women's sports shoes. Designed for maximum support and flexibility, these shoes are perfect for workouts, running, or casual wear. The breathable material and cushioned sole ensure comfort, while the durable construction provides long-lasting performance.",
          quantity: 1,
        },
        {
          id: 9,
          title: "Indoor Slippers",
          image: "shoes/women indoor slippers.webp",
          price: 39.99,
          description:
            "Relax in comfort with these women's indoor slippers. Designed for maximum comfort, these slippers feature a soft and cozy interior that keeps your feet warm and comfortable. The lightweight design and non-slip sole make them perfect for indoor use, whether at home or in the office.",
          quantity: 1,
        },
        {
          id: 10,
          title: "Wedge Heels",
          image: "shoes/wedge heels.webp",
          price: 49.99,
          description:
            "These wedge heels combine style and comfort, making them perfect for any occasion. The wedge design provides stability and support, while the cushioned insole ensures all-day comfort. The elegant design adds a touch of sophistication to your outfit, whether for casual or formal wear.",
          quantity: 1,
        },
        {
          id: 11,
          title: "Red Slippers",
          image: "shoes/szchen red slippers.webp",
          price: 59.99,
          description:
            "Add a pop of color to your outfit with these vibrant red slippers. Designed for comfort and style, these slippers feature a soft interior and durable sole, making them perfect for indoor or outdoor use. The bold red color adds a touch of flair to your casual look.",
          quantity: 1,
        },
        {
          id: 12,
          title: "Mule Slippers",
          image: "shoes/ules slippers.webp",
          price: 59.99,
          description:
            "These trendy mule slippers are designed for both style and comfort. Featuring an open-back design and soft interior, they are perfect for relaxing at home or running errands. The durable sole ensures long-lasting wear, while the stylish design adds a modern touch to your loungewear.",
          quantity: 1,
        },
        {
          id: 13,
          title: "Mens Sandals",
          image: "shoes/ens sandals.webp",
          price: 19.99,
          description:
            "These men's sandals are designed for comfort and durability, making them perfect for casual outings or beach trips. Featuring adjustable straps and a lightweight design, they provide a secure fit for all-day wear. The rugged sole ensures long-lasting use, even on rough terrain.",
          quantity: 1,
        },
        {
          id: 14,
          title: "Military Shoes",
          image: "shoes/ns military shoes.webp",
          price: 29.99,
          description:
            "Step out in style with these rugged military-style shoes. Designed for durability and comfort, these shoes are perfect for outdoor activities or casual wear. The sturdy construction and cushioned insole ensure all-day comfort, while the sleek design adds a touch of sophistication to your outfit.",
          quantity: 1,
        },
        {
          id: 15,
          title: "Airmax",
          image: "shoes/mens airmax.webp",
          price: 39.99,
          description:
            "These Airmax shoes are designed for maximum comfort and performance. Featuring a lightweight and breathable design, they are perfect for sports, running, or casual wear. The cushioned sole provides excellent support, while the durable construction ensures long-lasting use.",
          quantity: 1,
        },
        {
          id: 16,
          title: "Slippers",
          image: "shoes/mens sxchen slippers.webp",
          price: 49.99,
          description:
            "Relax in comfort with these men's indoor slippers. Designed for maximum comfort, these slippers feature a soft interior and durable sole, making them perfect for indoor use. The lightweight design ensures easy movement, while the non-slip sole provides added safety.",
          quantity: 1,
        },
        {
          id: 17,
          title: "Athletic Shoes",
          image: "shoes/mens athletic.webp",
          price: 59.99,
          description:
            "Stay active and comfortable with these men's athletic shoes. Designed for maximum support and flexibility, these shoes are perfect for workouts, running, or casual wear. The breathable material and cushioned sole ensure comfort, while the durable construction provides long-lasting performance.",
          quantity: 1,
        },
        {
          id: 18,
          title: "Mens Boots",
          image: "shoes/mens boots.webp",
          price: 59.99,
          description:
            "These men's boots are designed for durability and style, making them perfect for outdoor activities or casual wear. Featuring a rugged sole and comfortable fit, they provide excellent support for long walks or hikes. The sleek design adds a touch of sophistication to your outfit.",
          quantity: 1,
        },
        {
          id: 19,
          title: "Brave Shoes",
          image: "shoes/mens brave.webp",
          price: 19.99,
          description:
            "These Brave shoes are designed for both style and durability. Featuring a sleek design and comfortable fit, they are perfect for casual or formal occasions. The cushioned insole ensures all-day comfort, while the durable construction guarantees long-lasting use.",
          quantity: 1,
        },
        {
          id: 20,
          title: "Puma Shoes",
          image: "shoes/mens casual puma.webp",
          price: 29.99,
          description:
            "Step out in style with these Puma shoes. Designed for comfort and performance, these shoes are perfect for casual wear or light workouts. The breathable material and cushioned sole ensure comfort, while the sleek design adds a modern touch to your outfit.",
          quantity: 1,
        },
        {
          id: 21,
          title: "Mens Casuals",
          image: "shoes/mens casual shoes.webp",
          price: 39.99,
          description:
            "These men's casual shoes are designed for everyday comfort and style. Featuring a lightweight design and cushioned insole, they are perfect for long walks or casual outings. The durable construction ensures long-lasting wear, while the sleek design adds a touch of sophistication.",
          quantity: 1,
        },
        {
          id: 22,
          title: "Mens Casuals",
          image: "shoes/mens casual.webp",
          price: 49.99,
          description:
            "Stay comfortable and stylish with these men's casual shoes. Designed for everyday wear, these shoes feature a cushioned insole and durable sole, making them perfect for long walks or casual outings. The sleek design adds a modern touch to your outfit.",
          quantity: 1,
        },
        {
          id: 23,
          title: "Military Shoes",
          image: "shoes/ns military shoes.webp",
          price: 59.99,
          description:
            "These military-style shoes are designed for durability and comfort. Featuring a rugged sole and cushioned insole, they are perfect for outdoor activities or casual wear. The sleek design adds a touch of sophistication to your outfit.",
          quantity: 1,
        },
        {
          id: 24,
          title: "Mens Slippers",
          image: "shoes/mens idoor slippers.webp",
          price: 59.99,
          description:
            "Relax in comfort with these men's indoor slippers. Designed for maximum comfort, these slippers feature a soft interior and durable sole, making them perfect for indoor use. The lightweight design ensures easy movement, while the non-slip sole provides added safety.",
          quantity: 1,
        },
      ];  function addToCart(button) {
        const loggedInUser = localStorage.getItem("loggedInUser");
        if (!loggedInUser) {
          alert("You must be logged in to add products to the cart.");
          window.location.href = "login.html"; // Redirect to login page
          return;
        }

        const card = button.closest(".card");
        const productId = parseInt(card.getAttribute("data-id"));
        const product = products.find((p) => p.id === productId);

        if (product) {
          // Retrieve the cart for the logged-in user
          const cartKey = `cart_${loggedInUser}`;
          const cart = JSON.parse(localStorage.getItem(cartKey)) || [];

          // Check if the product already exists in the cart
          const existingProduct = cart.find((item) => item.id === product.id);

          if (existingProduct) {
            // If the product exists, increment its quantity
            existingProduct.quantity += 1;
          } else {
            // If the product doesn't exist, add it to the cart with a default quantity of 1
            product.quantity = 1;
            cart.push(product);
          }

          // Save the updated cart to localStorage
          localStorage.setItem(cartKey, JSON.stringify(cart));

          // Update button
          button.textContent = "Added to Cart";
          button.classList.remove("btn-add-to-cart");
          button.classList.add("btn-added");
          button.disabled = true;

          alert(`${product.title} added to cart!`);

          // Update button states
          updateButtonStates();
        }
      }

      // Function to update button states based on cart contents
      function updateButtonStates() {
        const loggedInUser = localStorage.getItem("loggedInUser");
        if (!loggedInUser) return;

        const cartKey = `cart_${loggedInUser}`;
        const cart = JSON.parse(localStorage.getItem(cartKey)) || [];

        document.querySelectorAll(".card").forEach((card) => {
          const productId = parseInt(card.getAttribute("data-id"));
          const button = card.querySelector(".btn-add-to-cart");

          if (cart.some((item) => item.id === productId)) {
            button.textContent = "Added to Cart";
            button.classList.remove("btn-add-to-cart");
            button.classList.add("btn-added");
            button.disabled = true;
          }
        });
      }

      
      updateButtonStates();
      // Modal Elements
 const modal = document.querySelector(".modal");
      const modalContent = document.querySelector(".modal-content");
      const closeModal = document.querySelector(".close-modal");

      // Function to open modal with product details
      function openModal(productId) {
        const product = products.find((p) => p.id === productId);
        if (product) {
          modalContent.querySelector("img").src = product.image;
          modalContent.querySelector("h2").textContent = product.title;
          modalContent.querySelector(
            "#modal-price"
          ).textContent = `$${product.price}`;
          modalContent.querySelector("#modal-description").textContent =
            product.description;
          modal.style.display = "flex";
        }
      }

      // Function to close modal
      function closeModalHandler() {
        modal.style.display = "none";
      }
      // Add to Cart Functionality from Modal
function addToCartFromModal(button) {
  const loggedInUser = localStorage.getItem("loggedInUser");
  if (!loggedInUser) {
    alert("You must be logged in to add products to the cart.");
    window.location.href = "login.html"; // Redirect to login page
    return;
  }

  const productTitle = modalContent.querySelector("h2").textContent;
  const product = products.find((p) => p.title === productTitle);

  if (product) {
    // Retrieve the cart for the logged-in user
    const cartKey = `cart_${loggedInUser}`;
    const cart = JSON.parse(localStorage.getItem(cartKey)) || [];

    // Check if the product already exists in the cart
    const existingProduct = cart.find((item) => item.id === product.id);

    if (existingProduct) {
      // If the product exists, increment its quantity
      existingProduct.quantity += 1;
    } else {
      // If the product doesn't exist, add it to the cart with a default quantity of 1
      product.quantity = 1;
      cart.push(product);
    }

    // Save the updated cart to localStorage
    localStorage.setItem(cartKey, JSON.stringify(cart));

    // Update button
    button.textContent = "Added to Cart";
    button.classList.remove("btn-add-to-cart");
    button.classList.add("btn-added");
    button.disabled = true;

    alert(`${product.title} added to cart!`);

    // Update button states
    updateButtonStates();
  }
}

// Attach event listeners to product cards
document.querySelectorAll(".card").forEach((card) => {
  card.addEventListener("click", (event) => {
    // Prevent event propagation if the click is on the "Add to Cart" button
    if (event.target.classList.contains("btn-add-to-cart")) {
      event.stopPropagation();
      return;
    }

    const productId = parseInt(card.getAttribute("data-id"));
    openModal(productId);
  });
});

// Close modal when clicking outside or on the close button
closeModal.addEventListener("click", (event) => {
  event.stopPropagation();
  closeModalHandler();
});

window.addEventListener("click", (event) => {
  if (event.target === modal) {
    closeModalHandler();
  }
});

      // Fetch and inject the navbar
      fetch("navbar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("navbar").innerHTML = data;

          // Initialize search functionality AFTER the navbar is loaded
          initializeSearch();
        });

      // Function to initialize search functionality
      function initializeSearch() {
        // Search Functionality
        function searchProducts() {
          const searchTerm = document
            .getElementById("searchInput")
            .value.toLowerCase();
          const cards = document.querySelectorAll(".card");

          cards.forEach((card) => {
            const title = card
              .querySelector(".card-title")
              .textContent.toLowerCase();
            if (title.includes(searchTerm)) {
              card.style.display = "block";
            } else {
              card.style.display = "none";
            }
          });
        }

        // event listener for Enter key
        document
          .getElementById("searchInput")
          .addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
              searchProducts();
            }
          });

        
        document
          .querySelector(".search-button")
          .addEventListener("click", searchProducts);
      }

      // Fetch and inject the footer
      fetch("footer.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("footer").innerHTML = data;
        });
        // Function to load the navbar dynamically
      function loadNavbar() {
        fetch("navbar.html")
          .then((response) => response.text())
          .then((data) => {
            // Inject the navbar into the DOM
            document.getElementById("navbar").innerHTML = data;

            // Attach the logout event listener after the navbar is loaded
            const logoutLink = document.getElementById("logoutLink");
            if (logoutLink) {
              logoutLink.addEventListener("click", (e) => {
                e.preventDefault(); // Prevent the default link behavior
                logout(); // Call the logout function
              });
            }
          });
      }

      // Function to handle logout
      function logout() {
        // Clear the logged-in user from localStorage
        localStorage.removeItem("loggedInUser");
        console.log("User logged out"); // Debugging
        // Redirect to the homepage
        window.location.href = "index.html";
      }

      // Load the navbar when the page loads
      loadNavbar();
      function toggleMenu() {
        const navbarLinks = document.querySelector(".custom-navbar-links");
        navbarLinks.classList.toggle("active");
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
  </body>
</html>
